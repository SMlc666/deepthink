<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DeepThink AI 代理工作流</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-brain"></i> DeepThink AI 代理工作流</h1>
            <p>一个使用多AI代理协作解决复杂问题的系统</p>
        </header>

        <div class="main-layout">
            <div class="history-panel">
                <h2><i class="fas fa-history"></i> 历史记录</h2>
                <div id="history-list"></div>
            </div>
            <div class="main-panel">
                <div class="form-container">
                    <form id="problem-form">
                        <div class="input-group">
                            <i class="fas fa-lightbulb-on"></i>
                            <textarea id="problem-input" name="problem" rows="3" placeholder="在这里输入您想解决的复杂问题..."></textarea>
                        </div>
                        <div class="options">
                            <div class="option-group">
                                <label for="solutions-input"><i class="fas fa-list-ol"></i> 方案数量:</label>
                                <input type="number" id="solutions-input" name="solutions" value="3" min="1" max="5">
                            </div>
                            <div class="option-group">
                                <label for="mode-select"><i class="fas fa-cogs"></i> 执行模式:</label>
                                <select id="mode-select" name="mode">
                                    <option value="batch" selected>批处理 (Batch)</option>
                                    <option value="sequential">串行 (Sequential)</option>
                                </select>
                            </div>
                        </div>
                        <button type="submit" id="submit-button">
                            <i class="fas fa-paper-plane"></i> 开始思考
                        </button>
                    </form>
                </div>

                <div id="results-container" class="results-container" style="display: none;">
                    <div id="status-message" class="status-message"></div>
                    
                    <div class="main-content-area">
                        <!-- Left Column -->
                        <div class="graph-view">
                            <div id="graph-container"></div>
                            <div id="tree-container" style="display: none;"></div>
                            <div id="usage-summary-container" style="display: none;">
                                 <h2><i class="fas fa-chart-pie"></i> 资源消耗</h2>
                                 <pre id="usage-summary-content"></pre>
                            </div>
                        </div>

                        <!-- Right Column -->
                        <div id="details-view" class="details-view">
                            <div id="details-placeholder">
                                <i class="fas fa-hand-pointer"></i>
                                <p>点击流程图中的节点以查看详细信息</p>
                            </div>
                            <div id="details-content" style="display: none;">
                                <h3 id="details-title"></h3>
                                <div id="details-body"></div>
                            </div>
                        </div>
                    </div>

                    <div id="final-review-container" class="final-review-container" style="display: none;">
                        <h2><i class="fas fa-star"></i> 最终评审报告</h2>
                        <div id="final-review-content" class="final-review-content"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>